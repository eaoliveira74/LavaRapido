body {
  background-color: #0f172a; /* Cor de fundo principal (slate-900) */
  color: #e2e8f0; /* Cor de texto principal (slate-200) */
}
/* Tipografia responsiva base: ajusta levemente conforme a largura da tela */
html { font-size: clamp(14px, 1.1vw + 0.6rem, 18px); }
.card {
  background-color: #1e293b; /* Cor dos cards (slate-800) */
  border: 1px solid #334155; /* Cor da borda dos cards (slate-700) */
}

/* Utilitários de acessibilidade */
.a11y-high-contrast {
  background: #000 !important;
  color: #fff !important;
}
.a11y-high-contrast .card {
  background: #111 !important;
  border-color: #444 !important;
}
.a11y-large-text {
  /* aumenta o tamanho base da fonte em 20% para acessibilidade */
  font-size: 1.2em !important; /* 120% */
}
/* Movimento reduzido: remove animações/transições */
.a11y-reduced-motion *, .a11y-reduced-motion *::before, .a11y-reduced-motion *::after {
  animation: none !important;
  transition: none !important;
}

/* Contorno de foco destacado para usuários de teclado */
:focus {
  outline: 3px solid #ffdd57;
  outline-offset: 2px;
}

/* Estilos específicos da barra de acessibilidade (controles pretos) */
#a11y-toolbar { background: #000 !important; color: #fff !important; }
#a11y-toolbar .form-check-label, #a11y-toolbar .small { color: #fff !important; }
#a11y-toolbar .form-check-input:checked { background-color: #000; border-color: #fff; }
#a11y-toolbar .form-check-input { background-color: #000; border-color: #fff; }
#a11y-toolbar .btn-outline-secondary { color: #fff; border-color: #fff; background: #000; }
#a11y-toolbar .btn-outline-secondary:hover { background: #111; border-color: #fff; }
#a11y-toolbar .a11y-controls { justify-content: flex-start; }
#a11y-toolbar .a11y-actions { align-items: flex-start; }
#a11y-toolbar .a11y-actions .btn { min-width: 160px; }
#a11y-toolbar .a11y-actions .btn + .btn { margin-top: 0; }

/* Barra recolhida e botão flutuante de alternância */
#a11y-toolbar.collapsed { height: 40px; overflow: hidden; padding-top: .25rem; padding-bottom: .25rem; }
#a11y-toggle {
  position: fixed;
  right: 12px;
  bottom: 12px;
  z-index: 1050;
  width: 44px;
  height: 44px;
  border-radius: 6px;
  background: #000;
  color: #fff;
  border: 1px solid #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
#a11y-toggle:focus { outline: 3px solid #ffdd57; }

/* Ícones da faixa de clima */
#stats-weather-strip .day-icon { display:flex; flex-direction:column; align-items:center; justify-content:center; width:48px; }
#stats-weather-strip .day-icon .label { font-size:0.7rem; color:#cbd5e1; margin-top:2px; text-align:center; }
#stats-weather-strip.two-row-grid { display:grid !important; grid-auto-flow:column; grid-template-rows:repeat(2, auto); align-items:flex-start !important; justify-content:flex-start; column-gap:0.75rem; row-gap:0.5rem; }
#stats-weather-strip.two-row-grid .day-icon { width:56px; }

.weather-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
}
.weather-legend span {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
.weather-legend:empty {
  display: none;
}
#home-weather-legend {
  margin-top: 50px;
}

/* Cards de clima na home */
#home-weather-layout { align-items: stretch; }
#home-weather-cards { align-items:center; }
.weather-card { min-width:140px; max-width:220px; box-shadow: 0 2px 6px rgba(0,0,0,0.12); }
.weather-card .title { font-weight:600; font-size:0.9rem; }
.weather-card .temp { font-size:1.1rem; font-weight:700; }
.weather-card .cond { font-size:0.85rem; color:#475569; }
.a11y-high-contrast .weather-card { background:#000 !important; color:#fff !important; }
/* Controles climáticos da toolbar foram removidos */
.weather-card .icon svg { width:36px; height:36px; }
.day-icon svg { width:24px; height:24px; }

.weather-dates-wrapper {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
  --weather-row-height: 88px;
  --weather-gap: 8px;
}

.weather-dates-grid {
  display: grid;
  grid-template-columns: repeat(6, minmax(64px, 1fr));
  gap: var(--weather-gap);
  min-width: 260px;
  max-width: 420px;
}
.weather-dates-grid:empty { display: none; }
.weather-date-entry {
  background: rgba(15, 23, 42, 0.75);
  border: 1px solid rgba(148, 163, 184, 0.24);
  border-radius: 8px;
  padding: 6px 4px;
  font-size: 0.78rem;
  text-align: center;
  color: #e2e8f0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  min-height: var(--weather-row-height);
}
.weather-date-entry.is-selected-date {
  background: #064e3b;
  border-color: rgba(16, 185, 129, 0.75);
  box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.35);
}
.weather-date-entry.is-selected-date .date-label,
.weather-date-entry.is-selected-date .date-extra,
.weather-date-entry.is-selected-date .date-icon-fallback {
  color: #ecfdf5;
}
.weather-date-entry .date-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}
.weather-date-entry .date-label {
  font-weight: 600;
  letter-spacing: 0.02em;
}
.weather-date-entry .date-extra {
  font-size: 0.7rem;
  color: #cbd5e1;
}
.weather-date-entry svg {
  width: 22px;
  height: 22px;
}
.weather-date-entry .date-icon-fallback {
  font-size: 1rem;
  color: #94a3b8;
}

@media (max-width: 1200px) {
  .weather-dates-grid { max-width: 360px; }
}
@media (max-width: 992px) {
  .weather-dates-grid { min-width: 0; max-width: none; }
}
@media (max-width: 900px) {
  .weather-dates-grid { grid-template-columns: repeat(4, minmax(72px, 1fr)); }
}
@media (max-width: 680px) {
  .weather-dates-grid { grid-template-columns: repeat(3, minmax(80px, 1fr)); }
}
@media (max-width: 540px) {
  .weather-dates-grid { grid-template-columns: repeat(2, minmax(96px, 1fr)); }
}
@media (max-width: 400px) {
  .weather-dates-grid { grid-template-columns: repeat(1, minmax(120px, 1fr)); }
}

/* Tamanho do gráfico de estatísticas: dá mais espaço para o canvas */
#stats-chart { width: 100% !important; height: 260px !important; }
@media (max-width: 576px) {
  #stats-chart { height: 220px !important; }
}

/* Melhora a legibilidade da lista de serviços em temas escuros */
/* Lista de serviços: garante texto legível mesmo quando regras globais forçam branco */
#services-list { background: #ffffff !important; border-radius: 6px; }
#services-list .list-group-item { background: #ffffff !important; color: #0b1220 !important; border: 1px solid rgba(0,0,0,0.06) !important; }
/* Força todos os filhos a herdarem cor legível (botões, ícones, rótulos) */
#services-list .list-group-item, #services-list .list-group-item * { color: #0b1220 !important; }
#services-list .list-group-item .btn { color: #0b1220 !important; border-color: rgba(11,18,32,0.12) !important; }

/* Ajustes para alto contraste */
.a11y-high-contrast #services-list { background: #0b1220 !important; }
.a11y-high-contrast #services-list .list-group-item { background: #0b1220 !important; color: #e6eef8 !important; border-color: rgba(255,255,255,0.06) !important; }
.a11y-high-contrast #services-list .list-group-item .btn { color: #fff !important; border-color: rgba(255,255,255,0.12) !important; }
.table {
  --bs-table-bg: #1e293b; /* Fundo da tabela */
  --bs-table-border-color: #334155; /* Cor da borda da tabela */
  --bs-table-striped-bg: #33415533; /* Fundo da linha zebrada */
}
.form-control, .form-select, .modal-content {
  background-color: #334155; /* Cor de fundo dos inputs (slate-700) */
  border-color: #475569; /* Cor da borda dos inputs (slate-600) */
  color: #e2e8f0;
}
.form-control:focus, .form-select:focus {
  background-color: #334155;
  border-color: #06b6d4; /* Cor do foco (cyan-500) */
  box-shadow: 0 0 0 0.25rem rgba(6, 182, 212, 0.25);
  color: #e2e8f0;
}
 .btn-cyan {
  background-color: #0891b2; /* Cor base do botão (cyan-600) */
  border-color: #0891b2;
  color: #fff;
}
.btn-cyan:hover {
  background-color: #06b6d4; /* Cor do hover (cyan-500) */
  border-color: #06b6d4;
  color: #fff;
}
.modal-content {
  background-color: #1e293b;
}

/* Previsão de término: fundo cinza claro e texto quase preto (#080808) */
#completion-time-alert {
  color: #080808 !important;
  background-color: #f1f5f9 !important; /* cinza claro (slate-100) */
  border-color: #e2e8f0 !important;     /* cinza um pouco mais escuro (slate-200) */
}

#completion-time-alert, #completion-time-alert * { color: #080808 !important; }
/* Seleção: manter cor do texto quase preto durante seleção */
#completion-time-alert::selection, #completion-time-alert *::selection { color: #080808; background: #cbd5e1; }
/* Aumentar especificidade dentro da view do cliente */
#client-view #completion-time-alert, #client-view #completion-time-alert * { color: #080808 !important; }
/* Tornar textos secundários brancos dentro da view do cliente para melhor contraste */
/* Alvo ampliado para cobrir variações (cards, listas, parágrafos) */
#client-view .text-secondary,
#client-view .small.text-secondary,
#client-view .card .card-body .text-secondary,
#client-view .list-group .text-secondary,
#client-view p.text-secondary,
#client-view .card .card-body p,
#client-view .card .card-body small {
  color: #f8fafc !important;
}

/* Grade de horários disponíveis */
#available-times-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
  gap: 8px;
}
.slot {
  border-radius: 6px;
  padding: 8px 6px;
  cursor: pointer;
  min-height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 2px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.06) inset;
}
.slot.free {
  background: #ffffff;
  color: #000000;
  border: 1px solid rgba(0,0,0,0.12);
}
#available-times-grid .slot.reserved {
  background: #fecaca; /* vermelho claro */
  color: #000000;
  border: 2px solid #ef4444 !important; /* vermelho */
  cursor: not-allowed;
}
#available-times-grid .slot.unavailable {
  background: #ffedd5; /* laranja claro */
  color: #000000;
  border: 2px solid #f97316 !important; /* laranja */
  cursor: not-allowed;
  opacity: 0.95;
}

/* Se um horário estiver reservado e indisponível, mantém vermelho (reservado tem prioridade) */
#available-times-grid .slot.reserved.unavailable {
  background: #fecaca !important;
  border-color: #ef4444 !important;
}
.slot .slot-label { font-size: 0.95rem; }

.slot:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.12), 0 0 0 1px rgba(0,0,0,0.06) inset;
}

/* Garante texto preto nos horários mesmo se regras da view do cliente forçarem branco */
#client-view #available-times-grid .slot,
#client-view #available-times-grid .slot .slot-label {
  color: #000000 !important;
}

/* Regra mais específica e abrangente para garantir branco em textos do cliente */
#client-view p,
#client-view small,
#client-view span,
#client-view li,
#client-view .text-secondary {
  color: #ffffff !important;
  opacity: 1 !important;
}

/* Forçar branco para todo o texto dentro dos cards do cliente (garante labels, títulos e textos menores) */
#client-view .card,
#client-view .card * {
  color: #ffffff !important;
}

/* Admin view: garantir texto branco para melhor contraste */
#admin-view,
#admin-view * {
  color: #ffffff !important;
}

/* Tabela de agendamentos: células e cabeçalho em branco */
#admin-view table thead th,
#admin-view table tbody td {
  color: #ffffff !important;
  border-color: rgba(255,255,255,0.06) !important;
}

/* Estatísticas do admin: controles compactos */
#admin-stats-section .form-select-sm,
#admin-stats-section .form-control-sm {
  padding: .25rem .5rem;
  font-size: .875rem;
}
#admin-stats-section .compact-50 {
  font-size: 0.75rem !important; /* ~50% vs padrão desktop (~1rem -> 0.75rem + menor padding) */
  padding: .2rem .4rem !important;
}
#admin-stats-section .stats-ctrl {
  min-width: 160px;
  width: 220px; /* confortável para label/valor */
}
#admin-stats-section .len-50 {
  width: 50% !important;
}
#admin-stats-section .len-30 {
  width: 30% !important;
}
/* Larguras responsivas para controles de estatísticas */
@media (max-width: 575.98px) {
  #admin-stats-section .len-50 { width: 100% !important; }
  #admin-stats-section .len-30 { width: 100% !important; }
  #admin-stats-section .stats-ctrl { width: 100% !important; min-width: 0; }
}
#admin-stats-section label.form-label {
  margin-bottom: .25rem;
}

/* Textarea de observações: força texto e placeholder brancos */
#observacoes {
  color: #ffffff !important;
  caret-color: #ffffff;
}
#observacoes::placeholder {
  color: #ffffff !important;
  opacity: 0.7;
}

/* Botões dentro do admin: ajustar cores de rótulos quando necessário */
#admin-view .btn,
#admin-view .btn * {
  color: #ffffff !important;
}

/* Ajuste adicional para badges/links 'Ver Comprovante' para garantir leitura */
#admin-view .btn-outline-info,
#admin-view .btn-outline-primary,
#admin-view .btn-outline-warning,
#admin-view .btn-outline-danger,
#admin-view .btn-outline-success {
  color: #ffffff !important;
}

/* Override forte: estiliza lista de serviços com fundo preto e texto branco na view do admin */
#admin-view #services-list { background: #000000 !important; border-radius: 6px; padding: 6px; }
#admin-view #services-list .list-group-item { background: #000000 !important; color: #ffffff !important; border: 1px solid rgba(255,255,255,0.04) !important; }
/* Garante que todos os filhos permaneçam legíveis */
#admin-view #services-list .list-group-item, #admin-view #services-list .list-group-item * { color: #ffffff !important; }
#admin-view #services-list .list-group-item .btn { color: #ffffff !important; border-color: rgba(255,255,255,0.08) !important; background: transparent !important; }
#admin-view #services-list .list-group-item .btn:hover { background: rgba(255,255,255,0.04) !important; }

/* ========================= */
/* Ajustes responsivos       */
/* ========================= */
@media (max-width: 992px) {
  /* Reduz desordem horizontal em telas médias */
  header .container { gap: 8px; }
  .weather-card { min-width: 120px; }
}

@media (max-width: 576px) {
  /* Empilha o conteúdo do cabeçalho */
  header .container { flex-direction: column; align-items: flex-start; }
  #home-weather { margin-top: 6px; }
  #home-weather-cards { width: 100%; flex-wrap: wrap; gap: 8px; }
  .weather-card { min-width: 0; flex: 1 1 calc(50% - 8px); }
  .weather-card .temp { font-size: 1rem; }
  .weather-card .cond { font-size: 0.8rem; }

  /* Grade de horários: deixa os itens menores */
  #available-times-grid { grid-template-columns: repeat(auto-fill, minmax(72px, 1fr)); gap: 6px; }
  .slot { min-height: 44px; padding: 6px 4px; }
  .slot .slot-label { font-size: 0.9rem; }

  /* Seleção de perfil: botões confortáveis sem overflow */
  #role-selection-view .btn-lg { padding: .6rem 1rem; font-size: 1.05rem; }

  /* Tabelas: garante container responsivo ocupando toda a largura */
  .table-responsive { width: 100%; }
}

@media (max-width: 360px) {
  .weather-card .icon svg { width: 28px; height: 28px; }
  .weather-card .temp { font-size: 0.95rem; }
  header h1.h3 { font-size: 1.05rem; }
}
